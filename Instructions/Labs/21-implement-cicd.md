---
lab:
  title: 在 Microsoft Fabric 中实现部署管道
  module: Implement CI/CD in Microsoft Fabric
---

# 在 Microsoft Fabric 中实现部署管道

使用 Microsoft Fabric 中的部署管道，可以在开发、测试和生产等环境之间自动复制对 Fabric 项中内容所做的更改。 可以使用部署管道在内容到达最终用户之前进行开发和测试。 在本练习中，你将创建一个部署管道，并将阶段分配给管道。 然后在开发工作区中创建一些内容，并使用部署管道在开发、测试和生产管道阶段之间进行部署。

> **备注**：若要完成本练习，需要是 Fabric 工作区管理员角色的成员。 若要分配角色，请参阅 [Microsoft Fabric 中工作区中的角色](https://learn.microsoft.com/en-us/fabric/get-started/roles-workspaces)。

完成本实验室大约需要 **20** 分钟。

## 创建工作区

创建启用了 Fabric 试用版的三个工作区。

1. 在 `https://app.fabric.microsoft.com/home?experience=fabric` 的[Microsoft Fabric 主页上](https://app.fabric.microsoft.com/home?experience=fabric)，选择“**Microsoft Fabric**”，然后选择左下角菜单栏上的“**数据工程**”。
2. 在左侧菜单栏中，选择“工作区”（图标类似于 &#128455;）。
3. 创建名为“开发”的新工作区，选择包含 Fabric 容量的许可模式（*试用版*、*高级版*或 *Fabric*）。
4. 重复步骤 1 和步骤 2，再创建两个名为“测试”和“生产”的工作区。 工作区是开发、测试和生产。
5. 选择左侧菜单栏上的“**工作区**”图标，并确认是否有三个名为“开发”、“测试和生产”的工作区

> **备注**：如果系统提示输入工作区的唯一名称，请一个或多个随机数字追加到“开发”、“测试”或“生产”等词。

## 创建部署管道

接下来，创建部署管道。

1. 在左侧菜单栏中，选择“工作区”。
2. 选择“**部署管道**”，然后选择“**新建管道**”。
3. 在“**添加新部署管道**”窗口中，为管道指定唯一的名称。
4. 接受“**自定义阶段**”窗口的默认值。  

   ![管道阶段的屏幕截图。](./Images/customize-stages.png)

5. 选择**创建**。

## 将工作区分配给部署管道的各个阶段

将工作区分配给部署管道的各个阶段。

1. 在左侧菜单栏上，选择创建的管道。 
2. 在出现的窗口中，选择每个部署阶段下的“**选择**”一词，然后选择与阶段名称匹配的工作区的名称。
3. 为每个部署阶段选择“**分配工作区**”。

  ![部署管道的屏幕截图。](./Images/deployment-pipeline.png)

## 创建内容

尚未在工作区中创建 Fabric 项。 接下来，在开发工作区中创建湖屋。

1. 在左侧菜单栏中，选择“工作区”。
2. 选择“**开发**”工作区。
3. 选择“**新建项**”。
4. 在出现的窗口中，选择“**湖屋**”，然后在“**新建湖屋窗口**”中，将湖屋命名为 **LabLakehouse**。
5. 选择**创建**。
6. 在湖屋资源管理器窗口中，选择“**从示例数据 开始**”，以使用数据填充新的 湖屋。

  ![湖屋资源管理器的屏幕截图。](./Images/lakehouse-explorer.png)

8. 在左侧菜单栏中，选择创建的管道。
9. 在“**开发**”阶段，选择 **>**，直到看到**湖屋**。 湖屋在开发阶段显示为新内容。 在“**开发**”和“**测试**”阶段之间，圆圈内有一个橙色 **X**。 橙色 **X** 表示开发和测试阶段未同步。
10. 选择橙色 **X** 下方的向下箭头以比较开发和测试环境中的内容。 选择“**比较**”。湖屋仅在开发阶段存在。  

  ![部署管道的屏幕截图，其中显示各阶段之间的内容不匹配。](./Images/lab-pipeline-compare.png)

## 在各个阶段之间部署内容

将湖屋从“**开发**”阶段部署到“**测试**”和“**生产**”阶段。
1. 选择管道“**部署**”阶段的“**部署**”按钮，将湖屋的当前状态复制到文本阶段。 
2. 在“**部署到下一阶段**”窗口中，选择“**部署**”。
3. 测试和生产阶段之间存在橙色 X。 选择橙色 X 下方的向下箭头。湖屋存在于开发和测试阶段，但尚未存在于生产阶段。
4. 在“**测试**”阶段，选择“**部署**”。
5. 在“**部署到下一阶段**”窗口中，选择“**部署**”。 各阶段之间的绿色复选标记表示所有阶段同步，包含相同的内容。
6. 使用部署管道在各阶段之间部署还会更新与部署阶段对应的工作区中的内容。 让我们确认一下。
7. 在左侧菜单栏中，选择“工作区”。
8. 选择**测试**工作区。 湖屋在是在那里复制的。
9. 从左侧菜单中的“**工作区**”图标打开“**生产**”工作区。 湖屋也被复制到生产工作区。

## 清理

在本练习中，你创建了一个部署管道，并向管道分配了阶段。 然后在开发工作区中创建内容，并使用部署管道在各管道阶段之间进行部署。

- 在左侧导航栏中，选择每个工作区的图标以查看其包含的所有项。
- 在顶部工具栏上的菜单中，选择“工作区设置”。
- 在“常规”部分中，选择“删除此工作区”。