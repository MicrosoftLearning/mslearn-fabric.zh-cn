---
lab:
  title: 在 Microsoft Fabric 中实现部署管道
  module: Implement CI/CD in Microsoft Fabric
---

# 在 Microsoft Fabric 中实现部署管道

使用 Microsoft Fabric 中的部署管道，可以在开发、测试和生产等环境之间自动复制对 Fabric 项中内容所做的更改。 可以使用部署管道在内容到达最终用户之前进行开发和测试。 在本练习中，你将创建一个部署管道，并将阶段分配给管道。 然后在开发工作区中创建一些内容，并使用部署管道在开发、测试和生产管道阶段之间进行部署。

> **备注**：若要完成本练习，需要是 Fabric 工作区管理员角色的成员。 若要分配角色，请参阅 [Microsoft Fabric 中工作区中的角色](https://learn.microsoft.com/en-us/fabric/get-started/roles-workspaces)。

完成本实验室大约需要 **20** 分钟。

## 创建工作区

创建启用了 Fabric 试用版的三个工作区。

1. 在浏览器中，导航到 [Microsoft Fabric 主页](https://app.fabric.microsoft.com/home?experience=fabric) (`https://app.fabric.microsoft.com/home?experience=fabric`)，使用 Fabric 凭据登录。
2. 在左侧菜单栏中，选择“工作区”（图标类似于 &#128455;）。
3. 创建名为“开发”的新工作区，选择包含 Fabric 容量的许可模式（*试用版*、*高级版*或 *Fabric*）。
4. 重复步骤 1 和步骤 2，再创建两个名为“测试”和“生产”的工作区。 工作区是开发、测试和生产。
5. 选择左侧菜单栏上的“**工作区**”图标，并确认是否有三个名为“开发”、“测试和生产”的工作区

> **备注**：如果系统提示输入工作区的唯一名称，请一个或多个随机数字追加到“开发”、“测试”或“生产”等词。

## 创建部署管道

接下来，创建部署管道。

1. 在左侧菜单栏中，选择“工作区”。
2. 选择“**部署管道**”，然后选择“**新建管道**”。
3. 在****“添加新部署管道”窗口中，为管道指定唯一的名称，然后选择****“下一步”。
4. 在新管道窗口中，选择****“创建并继续”。

## 将工作区分配给部署管道的各个阶段

将工作区分配给部署管道的各个阶段。

1. 在左侧菜单栏上，选择创建的管道。 
2. 在出现的窗口中，展开每个部署阶段下的**分配工作区**选项，然后选择与阶段名称匹配的工作区的名称。
3. 为每个部署阶段选择复选标记**分配**。

  ![部署管道的屏幕截图。](./Images/deployment-pipeline.png)

## 创建内容

尚未在工作区中创建 Fabric 项。 接下来，在开发工作区中创建湖屋。

1. 在左侧菜单栏中，选择“工作区”。
2. 选择“**开发**”工作区。
3. 选择“**新建项**”。
4. 在出现的窗口中，选择“**湖屋**”，然后在“**新建湖屋窗口**”中，将湖屋命名为 **LabLakehouse**。
5. 选择**创建**。
6. 在湖屋资源管理器窗口中，选择“**从示例数据 开始**”，以使用数据填充新的 湖屋。

  ![湖屋资源管理器的屏幕截图。](./Images/lakehouse-explorer.png)

7. 选择示例 **NYCTaxi**。
8. 在左侧菜单栏中，选择创建的管道。
9. 选择**开发**阶段，然后在部署管道画布下，可以看到创建为阶段项的湖屋。 在**测试**阶段的左边，圆圈内有一个 **X**。 橙色 **X** 表示开发和测试阶段未同步。
10. 选择**测试**阶段，在部署管道画布下，可以看到创建的湖屋只是源中的阶段项，在本例中，它指的是**开发**阶段。  

  ![部署管道的屏幕截图，其中显示各阶段之间的内容不匹配。](./Images/lab-pipeline-compare.png)

## 在各个阶段之间部署内容

将湖屋从“**开发**”阶段部署到“**测试**”和“**生产**”阶段。
1. 在部署管道画布中选择“**测试**”阶段。
1. 在部署管道画布下，选中湖屋项旁边的复选框。 然后选择“**部署**”按钮，将湖屋的当前状态复制到“**测试**”阶段。
1. 在“**部署到下一阶段**”窗口中，选择“**部署**”。
 现在，部署管道画布的生产阶段中的一个圆圈中有一个 X。 湖屋存在于“开发和测试”阶段，但尚未存在于“生产”阶段。
1. 在部署画布中选择“**生产**”阶段。
1. 在部署管道画布下，选中湖屋项旁边的复选框。 然后选择“**部署**”按钮，将湖屋的当前状态复制到“**生产**”阶段。
1. 在“**部署到下一阶段**”窗口中，选择“**部署**”。 各阶段之间的绿色复选标记表示所有阶段同步，包含相同的内容。
1. 使用部署管道在各阶段之间部署还会更新与部署阶段对应的工作区中的内容。 让我们确认一下。
1. 在左侧菜单栏中，选择“工作区”。
1. 选择**测试**工作区。 湖屋在是在那里复制的。
1. 从左侧菜单中的“**工作区**”图标打开“**生产**”工作区。 湖屋也被复制到生产工作区。

## 清理

在本练习中，你创建了一个部署管道，并向管道分配了阶段。 然后在开发工作区中创建内容，并使用部署管道在各管道阶段之间进行部署。

- 在左侧导航栏中，选择每个工作区的图标以查看其包含的所有项。
- 在顶部工具栏上的菜单中，选择“工作区设置”。
- 在“常规”部分中，选择“删除此工作区”。
